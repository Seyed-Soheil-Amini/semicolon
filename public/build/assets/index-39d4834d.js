import{l as P}from"./lodash-e8fb0632.js";import{i as M,b as U,n as W,k as D,l as $,t as ee,m as te,o as _,p as N,s as re,u as se,v as Q,S as K,w as L,x as ne,y as ae,z as ie,R as g,A as ue,B as m,C as G,D as oe}from"./app-01dad521.js";var V=function(e){M(n,e);function n(a,s){var t;return t=e.call(this)||this,t.client=a,t.options=s,t.trackedProps=[],t.selectError=null,t.bindMethods(),t.setOptions(s),t}var r=n.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),q(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return I(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return I(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(s,t){var u=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(s),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=u.queryKey),this.updateQuery();var c=this.hasListeners();c&&j(this.currentQuery,i,this.options,u)&&this.executeFetch(),this.updateResult(t),c&&(this.currentQuery!==i||this.options.enabled!==u.enabled||this.options.staleTime!==u.staleTime)&&this.updateStaleTimeout();var o=this.computeRefetchInterval();c&&(this.currentQuery!==i||this.options.enabled!==u.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)},r.getOptimisticResult=function(s){var t=this.client.defaultQueryObserverOptions(s),u=this.client.getQueryCache().build(this.client,t);return this.createResult(u,t)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(s,t){var u=this,i={},c=function(l){u.trackedProps.includes(l)||u.trackedProps.push(l)};return Object.keys(s).forEach(function(o){Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:function(){return c(o),s[o]}})}),(t.useErrorBoundary||t.suspense)&&c("error"),i},r.getNextResult=function(s){var t=this;return new Promise(function(u,i){var c=t.subscribe(function(o){o.isFetching||(c(),o.isError&&(s!=null&&s.throwOnError)?i(o.error):u(o))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(s){return this.fetch(U({},s,{meta:{refetchPage:s==null?void 0:s.refetchPage}}))},r.fetchOptimistic=function(s){var t=this,u=this.client.defaultQueryObserverOptions(s),i=this.client.getQueryCache().build(this.client,u);return i.fetch().then(function(){return t.createResult(i,u)})},r.fetch=function(s){var t=this;return this.executeFetch(s).then(function(){return t.updateResult(),t.currentResult})},r.executeFetch=function(s){this.updateQuery();var t=this.currentQuery.fetch(this.options,s);return s!=null&&s.throwOnError||(t=t.catch(W)),t},r.updateStaleTimeout=function(){var s=this;if(this.clearStaleTimeout(),!(D||this.currentResult.isStale||!$(this.options.staleTime))){var t=ee(this.currentResult.dataUpdatedAt,this.options.staleTime),u=t+1;this.staleTimeoutId=setTimeout(function(){s.currentResult.isStale||s.updateResult()},u)}},r.computeRefetchInterval=function(){var s;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(s=this.options.refetchInterval)!=null?s:!1},r.updateRefetchInterval=function(s){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=s,!(D||this.options.enabled===!1||!$(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||te.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(s,t){var u=this.currentQuery,i=this.options,c=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,f=s!==u,d=f?s.state:this.currentQueryInitialState,R=f?this.currentResult:this.previousQueryResult,h=s.state,S=h.dataUpdatedAt,T=h.error,B=h.errorUpdatedAt,w=h.isFetching,v=h.status,x=!1,k=!1,y;if(t.optimisticResults){var A=this.hasListeners(),X=!A&&q(s,t),Y=A&&j(s,u,t,i);(X||Y)&&(w=!0,S||(v="loading"))}if(t.keepPreviousData&&!h.dataUpdateCount&&(R!=null&&R.isSuccess)&&v!=="error")y=R.data,S=R.dataUpdatedAt,v=R.status,x=!0;else if(t.select&&typeof h.data<"u")if(c&&h.data===(o==null?void 0:o.data)&&t.select===this.selectFn)y=this.selectResult;else try{this.selectFn=t.select,y=t.select(h.data),t.structuralSharing!==!1&&(y=_(c==null?void 0:c.data,y)),this.selectResult=y,this.selectError=null}catch(C){N().error(C),this.selectError=C}else y=h.data;if(typeof t.placeholderData<"u"&&typeof y>"u"&&(v==="loading"||v==="idle")){var b;if(c!=null&&c.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))b=c.data;else if(b=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof b<"u")try{b=t.select(b),t.structuralSharing!==!1&&(b=_(c==null?void 0:c.data,b)),this.selectError=null}catch(C){N().error(C),this.selectError=C}typeof b<"u"&&(v="success",y=b,k=!0)}this.selectError&&(T=this.selectError,y=this.selectResult,B=Date.now(),v="error");var Z={status:v,isLoading:v==="loading",isSuccess:v==="success",isError:v==="error",isIdle:v==="idle",data:y,dataUpdatedAt:S,error:T,errorUpdatedAt:B,failureCount:h.fetchFailureCount,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&v!=="loading",isLoadingError:v==="error"&&h.dataUpdatedAt===0,isPlaceholderData:k,isPreviousData:x,isRefetchError:v==="error"&&h.dataUpdatedAt!==0,isStale:F(s,t),refetch:this.refetch,remove:this.remove};return Z},r.shouldNotifyListeners=function(s,t){if(!t)return!0;var u=this.options,i=u.notifyOnChangeProps,c=u.notifyOnChangePropsExclusions;if(!i&&!c||i==="tracked"&&!this.trackedProps.length)return!0;var o=i==="tracked"?this.trackedProps:i;return Object.keys(s).some(function(l){var f=l,d=s[f]!==t[f],R=o==null?void 0:o.some(function(S){return S===l}),h=c==null?void 0:c.some(function(S){return S===l});return d&&!h&&(!o||R)})},r.updateResult=function(s){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!re(this.currentResult,t)){var u={cache:!0};(s==null?void 0:s.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,t)&&(u.listeners=!0),this.notify(U({},u,s))}},r.updateQuery=function(){var s=this.client.getQueryCache().build(this.client,this.options);if(s!==this.currentQuery){var t=this.currentQuery;this.currentQuery=s,this.currentQueryInitialState=s.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),s.addObserver(this))}},r.onQueryUpdate=function(s){var t={};s.type==="success"?t.onSuccess=!0:s.type==="error"&&!se(s.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},r.notify=function(s){var t=this;Q.batch(function(){s.onSuccess?(t.options.onSuccess==null||t.options.onSuccess(t.currentResult.data),t.options.onSettled==null||t.options.onSettled(t.currentResult.data,null)):s.onError&&(t.options.onError==null||t.options.onError(t.currentResult.error),t.options.onSettled==null||t.options.onSettled(void 0,t.currentResult.error)),s.listeners&&t.listeners.forEach(function(u){u(t.currentResult)}),s.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},n}(K);function ce(e,n){return n.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&n.retryOnMount===!1)}function q(e,n){return ce(e,n)||e.state.dataUpdatedAt>0&&I(e,n,n.refetchOnMount)}function I(e,n,r){if(n.enabled!==!1){var a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&F(e,n)}return!1}function j(e,n,r,a){return r.enabled!==!1&&(e!==n||a.enabled===!1)&&(!r.suspense||e.state.status!=="error")&&F(e,r)}function F(e,n){return e.isStaleByTime(n.staleTime)}var le=function(e){M(n,e);function n(a,s){return e.call(this,a,s)||this}var r=n.prototype;return r.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},r.setOptions=function(s,t){e.prototype.setOptions.call(this,U({},s,{behavior:L()}),t)},r.getOptimisticResult=function(s){return s.behavior=L(),e.prototype.getOptimisticResult.call(this,s)},r.fetchNextPage=function(s){var t;return this.fetch({cancelRefetch:(t=s==null?void 0:s.cancelRefetch)!=null?t:!0,throwOnError:s==null?void 0:s.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:s==null?void 0:s.pageParam}}})},r.fetchPreviousPage=function(s){var t;return this.fetch({cancelRefetch:(t=s==null?void 0:s.cancelRefetch)!=null?t:!0,throwOnError:s==null?void 0:s.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:s==null?void 0:s.pageParam}}})},r.createResult=function(s,t){var u,i,c,o,l,f,d=s.state,R=e.prototype.createResult.call(this,s,t);return U({},R,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ne(t,(u=d.data)==null?void 0:u.pages),hasPreviousPage:ae(t,(i=d.data)==null?void 0:i.pages),isFetchingNextPage:d.isFetching&&((c=d.fetchMeta)==null||(o=c.fetchMore)==null?void 0:o.direction)==="forward",isFetchingPreviousPage:d.isFetching&&((l=d.fetchMeta)==null||(f=l.fetchMore)==null?void 0:f.direction)==="backward"})},n}(V),de=function(e){M(n,e);function n(a,s){var t;return t=e.call(this)||this,t.client=a,t.setOptions(s),t.bindMethods(),t.updateResult(),t}var r=n.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(s){this.options=this.client.defaultMutationOptions(s)},r.onUnsubscribe=function(){if(!this.listeners.length){var s;(s=this.currentMutation)==null||s.removeObserver(this)}},r.onMutationUpdate=function(s){this.updateResult();var t={listeners:!0};s.type==="success"?t.onSuccess=!0:s.type==="error"&&(t.onError=!0),this.notify(t)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(s,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,U({},this.options,{variables:typeof s<"u"?s:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var s=this.currentMutation?this.currentMutation.state:ie(),t=U({},s,{isLoading:s.status==="loading",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},r.notify=function(s){var t=this;Q.batch(function(){t.mutateOptions&&(s.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):s.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),s.listeners&&t.listeners.forEach(function(u){u(t.currentResult)})})},n}(K);function he(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var fe=g.createContext(he()),pe=function(){return g.useContext(fe)};function J(e,n,r){return typeof n=="function"?n.apply(void 0,r):typeof n=="boolean"?n:!!e}function O(e,n,r){var a=g.useRef(!1),s=g.useState(0),t=s[1],u=ue(e,n,r),i=m(),c=g.useRef();c.current?c.current.setOptions(u):c.current=new de(i,u);var o=c.current.getCurrentResult();g.useEffect(function(){a.current=!0;var f=c.current.subscribe(Q.batchCalls(function(){a.current&&t(function(d){return d+1})}));return function(){a.current=!1,f()}},[]);var l=g.useCallback(function(f,d){c.current.mutate(f,d).catch(W)},[]);if(o.error&&J(void 0,c.current.options.useErrorBoundary,[o.error]))throw o.error;return U({},o,{mutate:l,mutateAsync:o.mutate})}function z(e,n){var r=g.useRef(!1),a=g.useState(0),s=a[1],t=m(),u=pe(),i=t.defaultQueryObserverOptions(e);i.optimisticResults=!0,i.onError&&(i.onError=Q.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=Q.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=Q.batchCalls(i.onSettled)),i.suspense&&(typeof i.staleTime!="number"&&(i.staleTime=1e3),i.cacheTime===0&&(i.cacheTime=1)),(i.suspense||i.useErrorBoundary)&&(u.isReset()||(i.retryOnMount=!1));var c=g.useState(function(){return new n(t,i)}),o=c[0],l=o.getOptimisticResult(i);if(g.useEffect(function(){r.current=!0,u.clearReset();var f=o.subscribe(Q.batchCalls(function(){r.current&&s(function(d){return d+1})}));return o.updateResult(),function(){r.current=!1,f()}},[u,o]),g.useEffect(function(){o.setOptions(i,{listeners:!1})},[i,o]),i.suspense&&l.isLoading)throw o.fetchOptimistic(i).then(function(f){var d=f.data;i.onSuccess==null||i.onSuccess(d),i.onSettled==null||i.onSettled(d,null)}).catch(function(f){u.clearReset(),i.onError==null||i.onError(f),i.onSettled==null||i.onSettled(void 0,f)});if(l.isError&&!u.isReset()&&!l.isFetching&&J(i.suspense,i.useErrorBoundary,[l.error,o.getCurrentQuery()]))throw l.error;return i.notifyOnChangeProps==="tracked"&&(l=o.trackResult(l,i)),l}function E(e,n,r){var a=G(e,n,r);return z(a,V)}function H(e,n,r){var a=G(e,n,r);return z(a,le)}const p=oe.create({baseURL:`${location.origin}/api`}),ve=async e=>{const n=`/blogs/user/${e}`,{data:r}=await p.get(n);return r.data},ge=async e=>{console.log(e);const n="/blogs/",r=e.category.value,a={title:e.title,body:e.body,categoryId:r,labels:e.labels,image:e.image||null},{data:s}=await p.post(n,a,{headers:{"Content-Type":"multipart/form-data"}});return s},ye=async e=>{const n=`/blogs/${e.id}`,r=e.category.value,a=new FormData;a.append("title",e.title),a.append("body",e.body),a.append("labels",JSON.stringify(e.labels)),P.isEmpty(e.imageBaseCode)?P.isEmpty(e.image)||a.append("noChangeImage",!0):typeof e.image=="object"&&a.append("image",e.image),a.append("_method","PUT"),a.append("categoryId",r);const{data:s}=await p.post(n,a,{headers:{"Content-Type":"multipart/form-data"}});return s},me=async e=>{const n=`/blogs/${e}`,{data:r}=await p.delete(n);return r},Re=async()=>{const e="/categories/",{data:n}=await p.get(e,{withCredentials:!0});return n.data.map(a=>({value:a.id,label:a.name}))},be=async e=>{const n=`/blogs/publish/toggle/${e}`,{data:r}=await p.get(n);return r},Oe=async()=>{const e="/blogs/admin/verification",{data:n}=await p.get(e);return n.data},Se=async e=>{const n="/blogs/admin/verify",{data:r}=await p.post(n,{blogIds:e});return r.data},Qe=async e=>{const n="/blogs/admin/block",{data:r}=await p.post(n,{blogIds:e});return r.data},Ue=async({pageParam:e=0},n)=>{const r=`/randomBlogs/${n}?cursor=${e}`,{data:a}=await p.get(r);return a.data},Ce=async(e,n)=>{const r=`/blog/view/${n}`,{data:a}=await p.get(r);return a.data},Pe=async e=>{const n=`blog/like/${e}`,{data:r}=await p.get(n);return r.data},Ee=async e=>{const n=`user/activity/${e}`,{data:r}=await p.get(n);return r.data},we=async()=>{const e="admin/users",{data:n}=await p.get(e);return n.data},Ie=async e=>{const n="admin/delete/user",r=new FormData;r.append("usersId",JSON.stringify(e)),r.append("_method","DELETE");const{data:a}=await p.post(n,r);return a.data},Me=async e=>{const n="user/update",r=new FormData;r.append("name",e.name),r.append("email",e.email),r.append("jobTitle",e.jobTitle),r.append("about",e.about),P.isEmpty(e.imageBaseCode)?P.isEmpty(e.image)||r.append("noChangeImage",!0):typeof e.image=="object"&&r.append("image",e.image),r.append("_method","PATCH");const{data:a}=await p.post(n,r,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json, */*"}});return a.data},Fe=async e=>{const n="message/store",{data:r}=await p.post(n,e);return r.data},Te=async({pageParam:e=0})=>{const n=`/message/index/?cursor=${e}`,{data:r}=await p.get(n);return r.data},Be=async e=>{const n="/message/delete",r=new FormData;r.append("messageIds",JSON.stringify(e)),r.append("_method","DELETE");const{data:a}=await p.post(n,r);return a.data},Ae=e=>E("blogs",()=>ve(e),{refetchInterval:10*6e4,refetchOnWindowFocus:!1,refetchOnMount:!1,retryOnMount:!1}),De=()=>{const e=m();return O({mutationFn:n=>ge(n),onSuccess:n=>{const r=e.getQueryData("blogs");P.isEmpty(r)?e.refetchQueries("blogs"):e.setQueryData("blogs",[...r,n.data])}})},$e=()=>{const e=m();return O({mutationFn:n=>ye(n),onSuccess:()=>{e.refetchQueries("blogs")}})},_e=()=>{const e=m();return O({mutationFn:n=>me(n),onSuccess:()=>{e.refetchQueries("blogs")}})},Ne=()=>{const e=m();return O({mutationFn:n=>be(n),onSuccess:()=>{e.refetchQueries("blogs")}})},Le=()=>E("categories",Re,{refetchInterval:15*6e4,refetchOnWindowFocus:!1}),qe=()=>E("pendingBlogs",Oe,{refetchInterval:5*6e4,refetchOnWindowFocus:!1}),je=()=>{const e=m();return O({mutationFn:n=>Se(n),onSuccess:()=>{e.refetchQueries("pendingBlogs")}})},We=()=>{const e=m();return O({mutationFn:n=>Qe(n),onSuccess:()=>{e.refetchQueries("pendingBlogs")}})},Ke=e=>{const n=m();var r="";switch(e){case"oldest":n.getQueryData("oldestBlogs"),r="oldestBlogs";break;case"popular":n.getQueryData("popularBlogs"),r="popularBlogs";break;case"newest":n.getQueryData("newestBlogs"),r="newestBlogs";break;default:n.getQueryData("randomBlogs"),r="randomBlogs";break}return H({queryKey:[r],queryFn:a=>Ue(a,e),getNextPageParam:(a,s)=>a.next_cursor,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!1,retryOnMount:!1,keepPreviousData:!0})},Ge=(e,n)=>Ce(e,n),Ve=e=>Pe(e),Je=e=>E("userActivity",()=>Ee(e),{refetchInterval:5*6e4,refetchOnWindowFocus:!1,refetchOnMount:!0,retryOnMount:!1}),ze=()=>E("users",()=>we(),{refetchInterval:5*6e4,refetchOnWindowFocus:!1,refetchOnMount:!0,retryOnMount:!1}),He=()=>{const e=m();return O({mutationFn:n=>Ie(n),onSuccess:()=>{e.refetchQueries("users")}})},Xe=e=>Me(e),Ye=e=>Fe(e),Ze=()=>H({queryKey:["messages"],queryFn:e=>Te(e),getNextPageParam:(e,n)=>e.next_cursor,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!1,retryOnMount:!1,keepPreviousData:!0,refetchInterval:10*6e4}),et=()=>{const e=m();return O({mutationFn:n=>Be(n),onSuccess:()=>{e.refetchQueries("messages")}})};export{Ge as a,Ve as b,$e as c,Le as d,Ae as e,_e as f,Ne as g,De as h,Ye as i,Je as j,Ze as k,et as l,Xe as m,ze as n,He as o,qe as p,je as q,We as r,Ke as u};
