import{j as e,r as x,a as k}from"./app-23e59b41.js";import{A as C}from"./AuthenticatedLayout-b15faaed.js";import{p as B,q as E,r as I}from"./index-aef4e9b2.js";import{l as c}from"./lodash-b0739673.js";import{M as T,S as u,a}from"./skeleton-52cff6dc.js";import{F as f,u as F,b,c as P}from"./index.esm-e27479c4.js";import{T as V}from"./index-19032490.js";import{Q as d,k as $}from"./react-toastify.esm-2ff0bd8a.js";import"./ApplicationLogo-2e86c49f.js";import"./transition-a14f84a6.js";import"./index-e01d86e5.js";const A=s=>(console.log(s),e.jsx("div",{children:e.jsx(T,{isOpen:s.isOpen,className:"overflow-auto max-h-90vh h-6.5/7 w-4/5 fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-100 rounded-md px-5 py-0 w-400 max-w-full",children:e.jsxs("div",{className:"max-h-80vh h-6.5/7 flex-md-row",children:[e.jsxs("div",{className:"flex justify-content-around mb-0 mx-auto h-4/7",children:[e.jsx("div",{className:"flex h-6/7 w-2/3 mb-3 border-gray-300 rounded mx-auto my-auto text-center text-white",children:e.jsx("img",{src:`${c.isEmpty(s.blog.image)?"/images/altBlogImage.jpg":`${location.origin}/storage/${s.blog.image}`}`,alt:"Blog Image",className:"flex mx-auto my-auto h-full w-full rounded-md"})}),e.jsxs("div",{className:"flex-row w-1/3 mx-2 my-10",children:[e.jsx("div",{className:"flex text-3xl font-bold my-2 text-gray-500",children:e.jsx("h2",{className:"w-2/4",children:s.blog.title})}),e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"flex text-sm items-center px-1 py-2 rounded-md bg-gray-800 text-gray-200",children:[e.jsx(f,{className:"mx-1"}),s.blog.category.name]})}),e.jsxs("div",{className:"flex my-2 items-center",children:[e.jsx(F,{className:"mx-1 text-2xl"}),":"," ",e.jsx("h2",{className:"text-gray-700 hover:text-blue-500",children:e.jsx("a",{href:route("showUser",s.blog.user.id),rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),target:"_blank",as:"a",children:s.blog.user.name})})]}),e.jsx("div",{className:"flex my-2 items-center",children:!c.isEmpty(s.blog.labels)&&e.jsxs("div",{className:" pt-1 pb-1 h-2/7",children:[e.jsx("h2",{className:"py-1 mb-1",children:"Labels :"}),s.blog.labels.map(r=>e.jsxs("span",{className:"inline-block mx-1 bg-gray-600 rounded-full px-3 py-1 text-sm font-semibold text-gray-100",children:["#",r.name]}))]})})]})]}),e.jsxs("div",{className:"flex justify-between w-1/4 px-3 text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"mx-1 text-2xl"}),e.jsx("b",{children:s.blog.view})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"mx-1 text-2xl"}),e.jsx("b",{children:s.blog.like})]})]}),e.jsx("div",{className:"my-3 h-2.5/7 text-gray-500",children:e.jsx("p",{className:"h-full w-full px-2 py-2",children:s.blog.body})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:()=>s.onClose(),children:"Close"})})]})})})),S=s=>{const[r,i]=x.useState(!1),h=()=>{i(!1)};return e.jsxs("div",{className:`flex container-fluid border-b-2 my-4 ${s.checkBox.checked?"bg-gray-700":"bg-gray-900"} cursor-pointer rounded-lg`,onClick:()=>s.onChengeCheckBox(s.blog.id,s.checkBox.checked),children:[e.jsxs("div",{className:"flex flex-col md:flex-row p-3",children:[e.jsx("div",{className:"h-40 w-full md:w-1/7 my-2 bg-emerald-500",children:e.jsx("img",{src:`${c.isEmpty(s.blog.image)?"/images/altBlogImage.jpg":`${location.origin}/storage/${s.blog.image}`}`,alt:"Blog Image",className:"justify-start object-center lg:h-full lg:w-full"})}),e.jsxs("div",{className:"flex flex-col mx-2 w-full md:w-2/7 my-3",children:[e.jsx("h1",{className:"px-2 items-center mx-2 text-2xl mt-3 font-weight-bold font-bold",children:s.blog.title}),e.jsxs("h4",{className:"px-3 items-center mx-2 text-md mt-4 text-gray-400",children:["Author: ",s.blog.user.name]}),e.jsx("div",{className:"px-2 flex items-center mx-2 mt-3",children:e.jsxs("div",{className:"flex text-sm items-center px-1 py-2 rounded-md bg-gray-200 text-gray-800",children:[e.jsx(f,{className:"mx-1"}),s.blog.category.name]})})]}),e.jsx("div",{className:"w-full md:w-3/7 my-auto",children:e.jsx("p",{className:"px-2 items-center mx-4",children:e.jsx(V,{line:5,element:"span",truncateText:"...",text:s.blog.body,textTruncateChild:e.jsx("a",{children:"Read more"})})})})]}),e.jsxs("div",{className:"justify-end mt-3",children:[e.jsx("button",{class:"flex p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-gray-950 dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800",onClick:()=>i(!0),children:e.jsx("span",{class:"px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0",children:e.jsx(b,{className:"text-xl"})})})," "]}),r&&e.jsx(A,{blog:s.blog,isOpen:!0,onClose:h})]})},W=({auth:s})=>{const{data:r,isLoading:i,isFetching:h,isSuccess:R,isRefetching:g}=B(),{data:U,mutateAsync:j}=E(),{data:O,mutateAsync:y}=I(),[n,o]=x.useState([]);x.useEffect(()=>{!i&&o(r.map(l=>({id:l.id,checked:!1})))},[i]),x.useEffect(()=>{g?d.loading("Receiveing the new data...",{toastId:"loading"}):d.dismiss("loading")},[g]);const p=(l,t)=>{o(()=>n.map(m=>m.id==l?{id:m.id,checked:!t}:m))},v=()=>{const l=n.filter(t=>t.checked).map(t=>t.id);try{d.promise(async()=>await Promise.resolve(j(l)),{pending:"Verifing...",success:{render(){return!i&&o(r.map(t=>({id:t.id,checked:!1}))),"Blogs are verified successfully."}},error:{render({data:t}){return t.response&&t.response.status===400?"Blog not found":"Unfortunately, there is a problem in the process of publishing the blog."}}})}catch(t){console.log(t)}},w=()=>{const l=n.filter(t=>t.checked).map(t=>t.id);try{d.promise(async()=>await Promise.resolve(y(l)),{pending:"Blocking...",success:{render(){return!i&&o(r.map(t=>({id:t.id,checked:!1}))),"Blogs are blocked successfully."}},error:{render({data:t}){return t.response&&t.response.status===400?"Blog not found":"Unfortunately, there is a problem in the process of blocking the blog."}}})}catch(t){console.log(t)}},N=()=>{o(r.map(l=>({id:l.id,checked:!1})))};return e.jsxs(C,{user:s.user,children:[e.jsx(k,{title:"Verification"}),e.jsx($,{position:"top-center"}),i?e.jsx("div",{className:"h-full mx-auto max-w-2xl px-4 py-16 sm:px-6 sm:py-5 lg:max-w-7xl lg:px-8 mt-10",children:e.jsx("div",{className:"flex-row mt-0 grid gap-y-5 items-center",children:[...Array(6)].map((l,t)=>e.jsx("div",{className:"flex container-fluid bg-gray-900 rounded-lg p-3 justify-between",children:e.jsxs(u,{baseColor:"#171717",highlightColor:"#444",children:[e.jsx(a,{className:"flex flex-col md:flex-row",height:170,width:200}),e.jsx("div",{className:"flex-row mx-2 my-10",children:e.jsxs(u,{baseColor:"#171717",highlightColor:"#444",children:[e.jsx(a,{className:"",height:15,width:250}),e.jsx(a,{className:"",height:15,width:250}),e.jsx(a,{height:5,width:150}),e.jsx(a,{height:20,width:100})]})}),e.jsxs("div",{className:"w-full md:w-3/7 my-auto mx-4",children:[e.jsx(a,{height:5,width:450}),e.jsx(a,{height:5,width:450}),e.jsx(a,{height:5,width:450}),e.jsx(a,{height:5,width:450}),e.jsx(a,{height:5,width:450}),e.jsx(a,{height:5,width:450})]}),e.jsx("div",{className:"justify-end mt-3",children:e.jsx(a,{height:40,width:80})})]})},t))})}):e.jsx("div",{className:"container-fluid flex min-h-screen",children:!c.isEmpty(r)&&!c.isEmpty(n)?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-gray-200 grid grid-cols-1 gap-4 my-4 px-3 py-5 rounded w-6.5/7 mx-auto h-1/5",children:[!n.every(l=>l.checked===!1)&&e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex justify-between w-1/6",children:[e.jsx("button",{type:"button",class:"text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800",onClick:v,children:"Verify"}),e.jsx("button",{type:"button",class:"text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900",onClick:w,children:"Block"})]}),e.jsx("div",{className:"flex justify-end w-6/7",children:e.jsx("button",{type:"button",class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",onClick:N,children:"Cancle"})})]}),e.jsx("ul",{children:r.map(l=>e.jsx("li",{children:e.jsx(S,{blog:l,checkBox:n.filter(t=>t.id==l.id)[0],onChengeCheckBox:p})}))})]})}):e.jsx("div",{className:"flex items-center w-3/5 mx-auto text-center h-screen",children:e.jsx("h3",{className:"text-gray-200 mx-auto text-4xl",children:"There are no pending blogs."})})})]})};export{W as default};
