import{q as C,r as g,j as e,d as E}from"./app-01dad521.js";import{I as n}from"./InputLabel-83c29a64.js";import{P as U}from"./PrimaryButton-ebc1d5e8.js";import{T as u}from"./TextInput-bd48155d.js";import{u as F}from"./index-04ed8572.js";import{l}from"./lodash-e8fb0632.js";import{m as I}from"./index-39d4834d.js";import{a as B}from"./index.esm-45124c08.js";import{k as P,Q as c}from"./react-toastify.esm-a48bb263.js";import{D as T}from"./DangerButton-f5da57a7.js";import"./index-94f7def8.js";function G({mustVerifyEmail:x,status:p,className:h=""}){const r=C().props.auth.user,[j,f]=g.useState(!1),[a,d]=g.useState({name:r.name,email:r.email,jobTitle:r.job_title,about:r.about,image:r.image,imageBaseCode:""}),v=2*1024*1024,i=t=>{const{name:s,value:o}=t;d(w=>({...w,[s]:o}))},y=async t=>{t.preventDefault(),f(!0),c.promise(async()=>await Promise.resolve(I(a)),{pending:"Updating...",success:{render({data:s}){return d(s),f(!1),"Your information has been successfully saved."}},error:{render({data:s}){return s.response&&s.response.status===404?"User not found":"Unfortunately, there is a problem in the process of updating your information."}}})},b=t=>{const s=t[0],o=new FileReader;if(o.onload=()=>{i({name:"imageBaseCode",value:o.result}),i({name:"image",value:s})},s){if(s.size>v){c.info("Image size exceeds the limit (Max size 2MB)");return}if(!s.type.startsWith("image/")){c.info("Only image files are allowed");return}o.readAsDataURL(s)}},{getRootProps:N,getInputProps:k}=F({onDrop:b});let m;return l.isEmpty(a.imageBaseCode)?l.isEmpty(a.image)?m=e.jsxs("div",{className:"flex-col mx-auto my-auto h-full",children:[e.jsx(B,{className:"mx-auto h-16 w-16 text-gray-300 my-auto"}),e.jsx("p",{className:"mx-auto my-auto pt-6",children:"Drag and drop an image here, or click to select a file"})]}):m=e.jsx("img",{className:"flex mx-auto my-auto h-full object-cover rounded-md mask-circle",src:`${location.origin}/storage/${a.image}`,alt:"User image preview"}):m=e.jsx("img",{className:"flex mx-auto my-auto h-full object-cover rounded-md mask-circle",src:a.imageBaseCode,alt:"Selected image preview"}),e.jsxs(e.Fragment,{children:[e.jsx(P,{position:"top-center"}),e.jsxs("section",{className:h,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Profile Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Update your account's profile information and email address."})]}),e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:"Name"}),e.jsx(u,{id:"name",className:"mt-1 block w-full",value:a.name,onChange:t=>i({name:"name",value:t.target.value}),required:!0,isFocused:!0,autoComplete:"name"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:"Email"}),e.jsx(u,{id:"email",type:"email",className:"mt-1 block w-full",value:a.email,onChange:t=>i({name:"email",value:t.target.value}),required:!0,autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"joTitle",value:"Job Title"}),e.jsx(u,{id:"jobTitle",className:"mt-1 block w-full",value:a.jobTitle,onChange:t=>i({name:"jobTitle",value:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"about",value:"About"}),e.jsx("div",{className:"font-sans relative flex items-center focus-within:text-gray-600",children:e.jsx("textarea",{id:"about",name:"about",rows:3,className:"block w-full  border-gray-300 dark:border-gray-700 dark:bg-gray-950 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm input-with-icon",defaultValue:a.about,onChange:t=>i({name:"about",value:t.target.value})})})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx(n,{htmlFor:"image",value:"Icon Photo"}),e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 cursor-pointer bg-gray-900 px-5 py-2 h-60",...N(),children:e.jsxs("div",{className:"items-center",children:[e.jsxs("div",{className:`${l.isEmpty(a.image)&l.isEmpty(a.imageBaseCode)&&"mt-6"} text-sm leading-6 text-gray-400 h-full w-full mx-auto`,children:[e.jsx("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",...k()}),m]}),e.jsx("p",{className:"text-xs leading-5 text-gray-400"})]})})]}),x&&r.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-2 text-gray-800 dark:text-gray-200",children:["Your email address is unverified.",e.jsx(E,{href:route("verification.send"),method:"post",as:"button",className:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",children:"Click here to re-send the verification email."})]}),p==="verification-link-sent"&&e.jsx("div",{className:"mt-2 font-medium text-sm text-green-600 dark:text-green-400",children:"A new verification link has been sent to your email address."})]}),e.jsxs("div",{className:"flex justify-start items-center gap-4",children:[e.jsx(U,{disabled:j,children:"Save"}),!l.isEmpty(a.image)&&e.jsx("div",{children:e.jsx(T,{className:"align-content-center",onClick:()=>d({...a,image:null,imageBaseCode:""}),children:"Remove"})})]})]})]})]})}export{G as default};
